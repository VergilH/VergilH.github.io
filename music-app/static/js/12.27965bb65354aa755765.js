webpackJsonp([12],{dbiO:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={name:"player",data:function(){return{songmid:String,playUrl:String,playList:Array,name:String,singers:Array,albumImg:String,curSong:Number,curTime:Number,totalTime:Number,playing:!0,pauseing:!1,cantPlay:Boolean}},methods:{playerUrl:function(t){var i=this,n="https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&data=%7B%22req_0%22%3A%7B%22module%22%3A%22vkey.GetVkeyServer%22%2C%22method%22%3A%22CgiGetVkey%22%2C%22param%22%3A%7B%22guid%22%3A%22358840384%22%2C%22songmid%22%3A%5B%22"+t+"%22%5D%2C%22songtype%22%3A%5B0%5D%2C%22uin%22%3A%221443481947%22%2C%22loginflag%22%3A1%2C%22platform%22%3A%2220%22%7D%7D%2C%22comm%22%3A%7B%22uin%22%3A%2218585073516%22%2C%22format%22%3A%22json%22%2C%22ct%22%3A24%2C%22cv%22%3A0%7D%7D";this.$axios.get(n).then(function(t){t.data.req_0.data.midurlinfo[0].purl||(i.cantPlay=!0);var n="/music/"+t.data.req_0.data.midurlinfo[0].purl;console.log(n),i.playUrl=n}).catch(function(t){console.log(t)})},getToken:function(){this.songmid=this.$route.query.songmid,this.playerUrl(this.songmid)},getAlbumImg:function(){var t=JSON.parse(window.sessionStorage.getItem("playList")),i=this.$route.query.index;this.curSong=i,this.playList=t,this.name=t[i].songname,this.singers=t[i].singer;var n="/https://y.gtimg.cn/music/photo_new/T002R180x180M000"+t[i].albummid+".jpg";this.albumImg=n},nextSong:function(){var t=this.curSong+1,i=this.playList;this.name=i[t].songname,this.singers=i[t].singer,this.songmid=i[t].songmid;var n="/https://y.gtimg.cn/music/photo_new/T002R180x180M000"+i[t].albummid+".jpg";this.albumImg=n,this.curSong=t,this.playerUrl(this.songmid)},lastSong:function(){var t=this.curSong-1,i=this.playList;this.name=i[t].songname,this.singers=i[t].singer,this.songmid=i[t].songmid;var n="/https://y.gtimg.cn/music/photo_new/T002R180x180M000"+i[t].albummid+".jpg";this.albumImg=n,this.curSong=t,this.playerUrl(this.songmid)},play:function(){var t=this.$refs.audio;this.$refs.audio.play(),console.log(t.duration),this.totalTime=t.duration,console.log(this.curTime)},pause:function(){this.$refs.audio.pause()},isPlay:function(){console.log("music playing"),this.pauseing=!0,this.playing=!1},isPause:function(){console.log("music pause"),this.playing=!0,this.pauseing=!1,this.totalTime===this.curTime&&(this.$refs.point.style.width=0)},onTimeUpdate:function(t){console.log(t.target.currentTime),this.curTime=t.target.currentTime,this.$refs.point.style.width=this.curTime/this.totalTime*100+"%"},end:function(){console.log("end"),this.$refs.point.style.width=0}},created:function(){},mounted:function(){this.getToken(),this.getAlbumImg()},watch:{$route:{handler:function(t){"player"===t.name&&(this.getToken(),this.getAlbumImg())}}},destroyed:function(){}},e={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{attrs:{id:"content"}},[n("div",{staticClass:"content-bg",style:{backgroundImage:"url("+t.albumImg+")"}}),t._v(" "),n("span",{attrs:{id:"back-btn"},on:{click:function(i){return t.$router.back(-1)}}},[n("font-awesome-icon",{attrs:{icon:["fas","chevron-left"]}})],1),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"name"},[t._v(t._s(t.name))]),t._v(" "),n("p",{staticClass:"singer"},t._l(t.singers,function(i,s){return n("span",{key:i.name},[s?n("span",[t._v("/")]):t._e(),t._v(t._s(i.name))])}),0),t._v(" "),n("div",{staticClass:"circle-img"},[n("div",{staticClass:"inner-circle",style:{backgroundImage:"url("+t.albumImg+")"}})]),t._v(" "),n("div",{ref:"scroll",staticClass:"player-scroll"},[n("div",{ref:"point",staticClass:"scroll-inner"},[n("div",{attrs:{id:"scroll-point"}})])]),t._v(" "),n("div",{staticClass:"play-btn"},[n("span",{staticClass:"left",on:{click:function(i){return t.lastSong()}}},[n("font-awesome-icon",{attrs:{icon:"angle-double-left"}})],1),t._v(" "),t.playing?n("span",{staticClass:"play",on:{click:function(i){return t.play()}}},[n("font-awesome-icon",{attrs:{icon:"play"}})],1):t._e(),t._v(" "),t.pauseing?n("span",{staticClass:"pause",on:{click:function(i){return t.pause()}}},[n("font-awesome-icon",{attrs:{icon:"pause"}})],1):t._e(),t._v(" "),n("span",{staticClass:"right",on:{click:function(i){return t.nextSong()}}},[n("font-awesome-icon",{attrs:{icon:"angle-double-right"}})],1)]),t._v(" "),n("audio",{ref:"audio",attrs:{src:t.playUrl},on:{timeupdate:t.onTimeUpdate,play:t.isPlay,pause:t.isPause,onended:function(i){return t.end()}}})])])},staticRenderFns:[]};var a=n("VU/8")(s,e,!1,function(t){n("wH75")},"data-v-2d56c54c",null);i.default=a.exports},wH75:function(t,i){}});