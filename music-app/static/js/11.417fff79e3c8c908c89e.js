webpackJsonp([11],{"2QH8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mvHQ"),s=n.n(a),o=n("KgXo"),i=n("mtWM"),r=n.n(i);n("/JYx");function c(t){var e={w:t,p:10,n:10};return r.a.get("https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",{params:e}).then(function(t){return console.log(t),t})}var u={name:"search",components:{loading:o.a},data:function(){return{hotKey:[],key:"",timeout:null,searchRes:[],theSong:Array,isLoading:!1}},methods:{getSearchHotKey:function(){var t=this;r.a.get("/https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",{params:{uin:0,format:"json",platform:"h5",needNewCode:1}}).then(function(t){return t}).then(function(e){t.hotKey=e.data.data.hotkey,console.log(t.hotKey)})},getSearch:function(){var t=this;c(this.key).then(function(e){var n=e.data.indexOf("("),a=e.data.lastIndexOf(")"),s=JSON.parse(e.data.substring(n+1,a));t.searchRes=s.data.song.list})},getKey:function(t){var e=this;console.log(t),c(t).then(function(t){var n=t.data.indexOf("("),a=t.data.lastIndexOf(")"),s=JSON.parse(t.data.substring(n+1,a));e.searchRes=s.data.song.list})},getSongMid:function(t,e){window.sessionStorage.setItem("playList",s()(this.searchRes));var n=t,a=e;this.$router.push({path:"/player",query:{songmid:n,index:a}})},goCollectPage:function(){this.$router.push({path:"/collect"})}},watch:{key:function(t,e){var n=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){n.isLoading=!0,c(t).then(function(t){var e=t.data.indexOf("("),a=t.data.lastIndexOf(")"),s=JSON.parse(t.data.substring(e+1,a));console.log(s.data.song.list),n.searchRes=s.data.song.list,n.isLoading=!1})},600)}},created:function(){},mounted:function(){this.getSearchHotKey()},destroyed:function(){}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{attrs:{id:"top-myths-icon"}},[n("font-awesome-icon",{attrs:{icon:"pastafarianism"}}),t._v(" "),n("font-awesome-icon",{staticClass:"collect",attrs:{icon:"user-astronaut"},on:{click:function(e){return t.goCollectPage()}}})],1),t._v(" "),n("div",{attrs:{id:"search-btn"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],attrs:{type:"text",placeholder:"搜索",spellcheck:"false",maxlength:"20"},domProps:{value:t.key},on:{click:function(e){return t.getKey()},input:function(e){e.target.composing||(t.key=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"hot-key"},[n("p",[t._v("热门搜索")]),t._v(" "),t._l(t.hotKey.slice(0,6),function(e){return n("span",{key:e.w,on:{click:function(n){return t.getKey(e.k)}}},[t._v("\r\n      "+t._s(e.k)+"\r\n    ")])})],2),t._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),t._v(" "),t._l(t.searchRes,function(e,a){return n("div",{key:e.id,staticClass:"result",on:{click:function(n){return t.getSongMid(e.songmid,a)}}},[n("p",[t._v(t._s(e.songname))]),t._v(" "),t._l(e.singer,function(e){return n("span",{key:e.name,staticClass:"singer-album-name"},[t._v("/"+t._s(e.name))])}),t._v(" "),n("p",{staticClass:"singer-album-name"},[t._v("- "+t._s(e.albumname))])],2)})],2)},staticRenderFns:[]};var d=n("VU/8")(u,l,!1,function(t){n("X5su")},"data-v-37734cfd",null);e.default=d.exports},X5su:function(t,e){}});